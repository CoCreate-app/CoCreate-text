(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["text"] = factory();
	else
		root["CoCreate"] = root["CoCreate"] || {}, root["CoCreate"]["text"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "../CoCreate-components/CoCreate-text/src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../CoCreate-components/CoCreate-text/src/index.js":
/*!*********************************************************!*\
  !*** ../CoCreate-components/CoCreate-text/src/index.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar CoCreateText = {\n  elements: [],\n  init: function () {\n    this.initElement(document); // this.initSockets();\n  },\n  refreshElement: function (mutation) {\n    let element = mutation.target;\n    if (!element) return;\n    const tagName = element.tagName.toLowerCase();\n\n    if (!['input', 'textarea'].includes(tagName) || !element.getAttribute('data-document_id') || !element.getAttribute('name')) {\n      return;\n    }\n\n    if (!CoCreate.input.isUsageY(element)) return;\n\n    if (!CoCreate.observer.getInitialized(element, 'text')) {\n      this.__initEvents(element);\n    }\n\n    CoCreate.observer.setInitialized(element, 'text');\n\n    if (CoCreate.form.checkID(element)) {\n      // element.value = \"\";\n      this.createYDoc(element, true);\n    }\n  },\n  initElement: function (container) {\n    var self = this;\n    let fetch_container = container || document;\n    let elements = fetch_container.querySelectorAll('input[data-document_id][name], textarea[data-document_id][name]');\n\n    if (elements.length == 0 && fetch_container != document && fetch_container.hasAttribute('data-document_id') && fetch_container.hasAttribute('name')) {\n      elements = [fetch_container];\n    }\n\n    elements.forEach(element => {\n      if (!CoCreate.input.isUsageY(element)) {\n        return;\n      }\n\n      if (self.checkExistElement(element)) {\n        // this.setInitValue(elements[i])\n        return;\n      }\n\n      if (CoCreate.observer.getInitialized(element, 'text')) {\n        return;\n      }\n\n      CoCreate.observer.setInitialized(element, 'text');\n\n      self.__initEvents(element);\n\n      if (CoCreate.form.checkID(element)) {\n        self.createYDoc(element);\n      } else {\n        //. register create document_id event\n        element.addEventListener('set-document_id', function (event) {\n          let el = this;\n          let text_str = el.value;\n          self.createYDoc(el);\n          el.value = \"\";\n          self.sendChangeData(el, text_str, 0, text_str.length);\n        });\n      }\n    });\n  },\n  checkExistElement: function (element) {\n    for (var i = 0; i < this.elements.length; i++) {\n      if (this.elements[i].isSameNode(element)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  setInitValue: function (element) {\n    var typeId = this.generateTypeName(element);\n    var value = CoCreate.crdt.getWholeString(typeId);\n    element.value = value; // CoCreate.input.setValue(element, value);\n  },\n  createYDoc: function (element, isExclude) {\n    const collection = element.getAttribute('data-collection');\n    const document_id = element.getAttribute('data-document_id');\n    const name = element.getAttribute('name');\n    const status = CoCreate.crdt.init({\n      collection: collection,\n      document_id: document_id,\n      name: name,\n      element: element\n    });\n\n    if (!isExclude) {\n      this.elements.push(element);\n    } else {\n      element.value = CoCreate.crdt.getText({\n        collection,\n        document_id,\n        name\n      }); // CoCreate.input.setValue(element, CoCreate.crdt.getText({collection, document_id, name }));\n    }\n  },\n  __initEvents: function (input_element) {\n    //. selection event\n    const self = this;\n    input_element.addEventListener('select', function () {\n      if (this.selectionEnd !== this.selectionStart) {\n        self.setSelectionInfo(this, true, this.selectionStart, this.selectionEnd);\n        if (document.activeElement === this) self.sendPosition(this);\n      }\n    });\n    input_element.addEventListener('keyup', function (event) {\n      let arrows = [37, 38, 39, 40];\n\n      if (arrows.indexOf(event.keyCode) != -1) {\n        self.sendPosition(this);\n      }\n    });\n    input_element.addEventListener('keydown', function (event) {\n      let arrows = [37, 38, 39, 40];\n\n      if (arrows.indexOf(event.keyCode) != -1) {\n        //console.log(\"keydown ---- \")\n        self.sendPosition(this);\n      }\n    });\n    input_element.addEventListener('click', function (event) {\n      if (document.activeElement === this) self.sendPosition(this);\n    });\n    input_element.addEventListener('blur', function (event) {\n      const id = self.generateTypeName(this);\n      CoCreate.crdt.setCursorNull(id);\n    });\n    input_element.addEventListener('input', function (event) {\n      let nowstart = this.selectionStart - 1;\n      let nowend = nowstart;\n      let selection_info = self.getSelectionInfo(this);\n      let content_text = \"\";\n      let isUpdate = false;\n\n      switch (event.inputType) {\n        case 'deleteContentBackward':\n          isUpdate = true;\n          nowstart++;\n          nowend = nowstart + 1;\n          break;\n\n        case 'deleteContentForward':\n          isUpdate = true;\n          nowstart++;\n          nowend = nowstart + 1;\n          break;\n\n        case 'insertLineBreak':\n          isUpdate = true;\n          content_text = \"\\n\";\n          nowend++;\n          break;\n\n        case 'insertText':\n          isUpdate = true;\n          content_text = event.data || \"\\n\";\n          break;\n\n        case 'deleteByCut':\n          isUpdate = true;\n          break;\n      }\n\n      if (isUpdate) {\n        if (selection_info.is_selected) {\n          //. delete event\n          let character_deleted = selection_info.start - selection_info.end; //CoCreate.cursors.recalculate_local_cursors(this,character_deleted)\n\n          self.sendChangeData(this, \"\", selection_info.start, selection_info.end);\n\n          if (content_text.length > 0) {\n            self.sendChangeData(this, content_text, nowstart, nowend);\n          }\n\n          self.setSelectionInfo(this, false, this.selectionStart, this.selectionStart);\n        } else {\n          self.sendChangeData(this, content_text, nowstart, nowend);\n        }\n      }\n    });\n    /** unselect events **/\n\n    input_element.addEventListener('blur', function (e) {\n      self.setSelectionInfo(this, false, this.selectionStart, this.selectionStart);\n    });\n    input_element.addEventListener('click', function (e) {\n      self.setSelectionInfo(this, false, this.selectionStart, this.selectionStart);\n    });\n    /** past events **/\n\n    input_element.addEventListener('paste', function (event) {\n      let content_text = event.clipboardData.getData('Text');\n      let start = this.selectionStart;\n      let end = this.selectionEnd; //. send delete event\n\n      if (start != end) {\n        this.setSelectionRange(end, end);\n        self.sendChangeData(this, \"\", start, end, false);\n      }\n\n      if (start == end) {// to calculate Cursors in collaboration \n        // CoCreate.cursors.recalculate_local_cursors(this,content_text.length)\n      } //. insert event\n\n\n      self.sendChangeData(this, content_text, start, start, false);\n      event.preventDefault();\n    });\n    input_element.addEventListener('cocreate-y-update', function (event) {\n      var info = event.detail;\n      input_element.crudSetted = true;\n      var pos = 0;\n      var flag = true;\n      info.forEach(item => {\n        if (item.retain) {\n          flag = true;\n          pos = item.retain;\n        }\n\n        if (item.insert || item.delete) {\n          if (flag == false) pos = 0;\n          flag = false;\n\n          if (item.insert) {\n            //. insert process\n            self.updateChangeData(this, item.insert, pos, pos);\n          } else if (item.delete) {\n            //. delete process\n            self.updateChangeData(this, \"\", pos, pos + item.delete);\n          }\n        }\n      });\n    });\n  },\n  setSelectionInfo: function (e, isSelect, start, end) {\n    e.setAttribute(\"is_selected\", isSelect);\n    e.setAttribute(\"selection_start\", start);\n    e.setAttribute(\"selection_end\", end); //console.log(\"swelect\",e)\n\n    this.sendPosition(e);\n  },\n  getSelectionInfo: function (e) {\n    return {\n      is_selected: e.getAttribute(\"is_selected\") === 'true' ? true : false,\n      start: parseInt(e.getAttribute(\"selection_start\")),\n      end: parseInt(e.getAttribute(\"selection_end\"))\n    };\n  },\n  checkDocumentID: function (element) {\n    let document_id = element.getAttribute('data-document_id');\n\n    if (!document_id || document_id === \"\") {\n      return false;\n    }\n\n    return true;\n  },\n  sendChangeData: function (element, content, start, end, isRemove = true) {\n    if (!this.checkDocumentID(element)) {\n      CoCreate.form.request({\n        element: element,\n        nameAttr: \"name\"\n      });\n      element.setAttribute('data-document_id', 'pending');\n      return;\n    }\n\n    if (element.getAttribute('data-document_id') == 'pending') {\n      return;\n    }\n\n    const collection = element.getAttribute('data-collection'),\n          document_id = element.getAttribute('data-document_id'),\n          name = element.getAttribute('name');\n\n    if (element.getAttribute('data-save_value') == 'false') {\n      return;\n    } //console.log(\"SendChangeDataFrom Cocreate-Text\")\n\n\n    let character_count = content.length > 0 ? content.length : -1;\n    CoCreate.cursors.recalculate_local_cursors(element, character_count); //send position when keyUp \n\n    this.sendPosition(element);\n\n    if (content.length > 0) {\n      if (isRemove) {\n        element.setRangeText(\"\", start, start + content.length, \"start\");\n      }\n\n      CoCreate.crdt.insertText({\n        collection,\n        document_id,\n        name,\n        value: content,\n        position: start\n      });\n    } else {\n      if (isRemove) element.setRangeText(\" \".repeat(end - start), start, start, \"end\");\n      CoCreate.crdt.deleteText({\n        collection,\n        document_id,\n        name,\n        position: start,\n        length: end - start\n      });\n    }\n\n    if (document.activeElement === element) {\n      this.setSelectionInfo(element, false, element.selectionStart, element.selectionStart);\n      this.sendPosition(element);\n    }\n  },\n  updateChangeData: function (element, content, start, end) {\n    let prev_start = element.selectionStart;\n    let prev_end = element.selectionEnd;\n    element.setRangeText(content, start, end, \"end\");\n\n    if (prev_start >= start) {\n      if (content == \"\") {\n        prev_start -= end - start;\n        prev_end -= end - start;\n        prev_start = prev_start < start ? start : prev_start;\n      } else {\n        prev_start += content.length;\n        prev_end += content.length;\n      }\n    }\n\n    {\n      if (content == \"\" && prev_end >= start) {\n        prev_end = prev_end >= end ? prev_end - (end - start) : start;\n      }\n    }\n    element.selectionStart = prev_start;\n    element.selectionEnd = prev_end;\n    var isFocused = document.activeElement === element;\n    CoCreate.cursors.refresh_mirror(element);\n\n    if (CoCreate.floatingLabel) {\n      CoCreate.floatingLabel.update(element, element.value);\n    }\n  },\n  generateTypeName: function (element) {\n    var collection = element.getAttribute('data-collection');\n    var document_id = element.getAttribute('data-document_id');\n    var name = element.getAttribute('name');\n    return CoCreate.crdt.generateID(config.organization_Id, collection, document_id, name);\n  },\n  setText: function (element_id, info) {\n    var pos = 0;\n    var flag = true;\n    info.forEach(item => {\n      if (item.retain) {\n        flag = true;\n        pos = item.retain;\n      }\n\n      if (item.insert || item.delete) {\n        if (flag == false) pos = 0;\n        flag = false;\n\n        if (item.insert) {\n          //. insert process\n          this.receiveChangeData(element_id, item.insert, pos, pos);\n        } else if (item.delete) {\n          //. delete process\n          this.receiveChangeData(element_id, \"\", pos, pos + item.delete);\n        }\n      }\n    });\n  },\n  isAvaiableEl: function (element) {\n    //console.log(this.elements)\n    for (var i = 0; i < this.elements.length; i++) {\n      console.log(this.elements[i].isEqualNode(element), element);\n\n      if (this.elements[i].isEqualNode(element) === true) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  sendPosition: function (element) {\n    //console.log(\"Se envio \")\n\n    /*if (!this.isAvaiableEl(element)) {\n      return;\n    }*/\n    const id = this.generateTypeName(element); //console.log(\" SEnd Position Selector ID \",id)\n    //console.log(element.selectionStart, element.selectionEnd);\n\n    let from = element.selectionStart;\n    let to = element.selectionEnd; //console.log(\"Se envio la position \",id,from, to)\n\n    CoCreate.crdt.setPositionYJS(id, from, to);\n  }\n};\nCoCreateText.init(); // CoCreateInit.register('CoCreateText', CoCreateText, CoCreateText.initElement);\n\nCoCreate.observer.init({\n  name: 'CoCreateTextCreate',\n  observe: ['subtree', 'childList'],\n  include: '[data-collection][data-document_id][name]',\n  callback: function (mutation) {\n    console.log('cocreate-text init');\n    CoCreateText.initElement(mutation.target);\n  }\n});\nCoCreate.observer.init({\n  name: 'CoCreateTextNameObserver',\n  observe: ['attributes'],\n  attributes: ['name'],\n  callback: function (mutation) {\n    console.log('change cocreate-text name');\n    CoCreateText.refreshElement(mutation);\n  }\n});\nvar _default = CoCreateText;\nexports.default = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS50ZXh0Ly4uL0NvQ3JlYXRlLWNvbXBvbmVudHMvQ29DcmVhdGUtdGV4dC9zcmMvaW5kZXguanM/ZjZhNiJdLCJuYW1lcyI6WyJDb0NyZWF0ZVRleHQiLCJlbGVtZW50cyIsImluaXQiLCJpbml0RWxlbWVudCIsImRvY3VtZW50IiwicmVmcmVzaEVsZW1lbnQiLCJtdXRhdGlvbiIsImVsZW1lbnQiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImdldEF0dHJpYnV0ZSIsIkNvQ3JlYXRlIiwiaW5wdXQiLCJpc1VzYWdlWSIsIm9ic2VydmVyIiwiZ2V0SW5pdGlhbGl6ZWQiLCJfX2luaXRFdmVudHMiLCJzZXRJbml0aWFsaXplZCIsImZvcm0iLCJjaGVja0lEIiwiY3JlYXRlWURvYyIsImNvbnRhaW5lciIsInNlbGYiLCJmZXRjaF9jb250YWluZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiaGFzQXR0cmlidXRlIiwiZm9yRWFjaCIsImNoZWNrRXhpc3RFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZWwiLCJ0ZXh0X3N0ciIsInZhbHVlIiwic2VuZENoYW5nZURhdGEiLCJpIiwiaXNTYW1lTm9kZSIsInNldEluaXRWYWx1ZSIsInR5cGVJZCIsImdlbmVyYXRlVHlwZU5hbWUiLCJjcmR0IiwiZ2V0V2hvbGVTdHJpbmciLCJpc0V4Y2x1ZGUiLCJjb2xsZWN0aW9uIiwiZG9jdW1lbnRfaWQiLCJuYW1lIiwic3RhdHVzIiwicHVzaCIsImdldFRleHQiLCJpbnB1dF9lbGVtZW50Iiwic2VsZWN0aW9uRW5kIiwic2VsZWN0aW9uU3RhcnQiLCJzZXRTZWxlY3Rpb25JbmZvIiwiYWN0aXZlRWxlbWVudCIsInNlbmRQb3NpdGlvbiIsImFycm93cyIsImluZGV4T2YiLCJrZXlDb2RlIiwiaWQiLCJzZXRDdXJzb3JOdWxsIiwibm93c3RhcnQiLCJub3dlbmQiLCJzZWxlY3Rpb25faW5mbyIsImdldFNlbGVjdGlvbkluZm8iLCJjb250ZW50X3RleHQiLCJpc1VwZGF0ZSIsImlucHV0VHlwZSIsImRhdGEiLCJpc19zZWxlY3RlZCIsImNoYXJhY3Rlcl9kZWxldGVkIiwic3RhcnQiLCJlbmQiLCJlIiwiY2xpcGJvYXJkRGF0YSIsImdldERhdGEiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInByZXZlbnREZWZhdWx0IiwiaW5mbyIsImRldGFpbCIsImNydWRTZXR0ZWQiLCJwb3MiLCJmbGFnIiwiaXRlbSIsInJldGFpbiIsImluc2VydCIsImRlbGV0ZSIsInVwZGF0ZUNoYW5nZURhdGEiLCJpc1NlbGVjdCIsInNldEF0dHJpYnV0ZSIsInBhcnNlSW50IiwiY2hlY2tEb2N1bWVudElEIiwiY29udGVudCIsImlzUmVtb3ZlIiwicmVxdWVzdCIsIm5hbWVBdHRyIiwiY2hhcmFjdGVyX2NvdW50IiwiY3Vyc29ycyIsInJlY2FsY3VsYXRlX2xvY2FsX2N1cnNvcnMiLCJzZXRSYW5nZVRleHQiLCJpbnNlcnRUZXh0IiwicG9zaXRpb24iLCJyZXBlYXQiLCJkZWxldGVUZXh0IiwicHJldl9zdGFydCIsInByZXZfZW5kIiwiaXNGb2N1c2VkIiwicmVmcmVzaF9taXJyb3IiLCJmbG9hdGluZ0xhYmVsIiwidXBkYXRlIiwiZ2VuZXJhdGVJRCIsImNvbmZpZyIsIm9yZ2FuaXphdGlvbl9JZCIsInNldFRleHQiLCJlbGVtZW50X2lkIiwicmVjZWl2ZUNoYW5nZURhdGEiLCJpc0F2YWlhYmxlRWwiLCJjb25zb2xlIiwibG9nIiwiaXNFcXVhbE5vZGUiLCJmcm9tIiwidG8iLCJzZXRQb3NpdGlvbllKUyIsIm9ic2VydmUiLCJpbmNsdWRlIiwiY2FsbGJhY2siLCJhdHRyaWJ1dGVzIl0sIm1hcHBpbmdzIjoiQUFBYTs7Ozs7O0FBRWIsSUFBSUEsWUFBWSxHQUFHO0FBQ2pCQyxVQUFRLEVBQUUsRUFETztBQUdqQkMsTUFBSSxFQUFHLFlBQVc7QUFDaEIsU0FBS0MsV0FBTCxDQUFpQkMsUUFBakIsRUFEZ0Is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QUFHdEJHLFlBQVUsRUFBRSxDQUFDLE1BQUQsQ0FIVTtBQUl0QkQsVUFBUSxFQUFFLFVBQVN4SCxRQUFULEVBQW1CO0FBQzVCZ0gsV0FBTyxDQUFDQyxHQUFSLENBQVksMkJBQVo7QUFDQXZILGdCQUFZLENBQUNLLGNBQWIsQ0FBNEJDLFFBQTVCO0FBQ0E7QUFQcUIsQ0FBdkI7ZUFVZU4sWSIsImZpbGUiOiIuLi9Db0NyZWF0ZS1jb21wb25lbnRzL0NvQ3JlYXRlLXRleHQvc3JjL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb0NyZWF0ZVRleHQgPSB7XG4gIGVsZW1lbnRzOiBbXSxcbiAgXG4gIGluaXQgOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmluaXRFbGVtZW50KGRvY3VtZW50KTtcbiAgICAvLyB0aGlzLmluaXRTb2NrZXRzKCk7XG4gIH0sXG4gIFxuICByZWZyZXNoRWxlbWVudDogZnVuY3Rpb24obXV0YXRpb24pIHtcbiAgICBsZXQgZWxlbWVudCA9IG11dGF0aW9uLnRhcmdldDtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFbJ2lucHV0JywgJ3RleHRhcmVhJ10uaW5jbHVkZXModGFnTmFtZSkgfHxcbiAgICAgICAgIWVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJykgfHxcbiAgICAgICAgIWVsZW1lbnQuZ2V0QXR0cmlidXRlKCduYW1lJykpIHtcbiAgICAgIHJldHVybiBcbiAgICB9XG4gICAgXG4gICAgaWYgKCFDb0NyZWF0ZS5pbnB1dC5pc1VzYWdlWShlbGVtZW50KSkgcmV0dXJuO1xuICAgIFxuICAgIGlmICghQ29DcmVhdGUub2JzZXJ2ZXIuZ2V0SW5pdGlhbGl6ZWQoZWxlbWVudCwgJ3RleHQnKSkge1xuICAgICAgdGhpcy5fX2luaXRFdmVudHMoZWxlbWVudCk7XG4gICAgfVxuICAgIENvQ3JlYXRlLm9ic2VydmVyLnNldEluaXRpYWxpemVkKGVsZW1lbnQsICd0ZXh0Jyk7XG4gICAgXG4gICAgaWYgKENvQ3JlYXRlLmZvcm0uY2hlY2tJRChlbGVtZW50KSkge1xuICAgICAgLy8gZWxlbWVudC52YWx1ZSA9IFwiXCI7XG4gICAgICB0aGlzLmNyZWF0ZVlEb2MoZWxlbWVudCwgdHJ1ZSk7XG4gICAgfVxuICAgIFxuICB9LFxuICBcbiAgaW5pdEVsZW1lbnQ6IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBsZXQgZmV0Y2hfY29udGFpbmVyID0gY29udGFpbmVyIHx8IGRvY3VtZW50O1xuICAgIFxuICAgIGxldCBlbGVtZW50cyA9IGZldGNoX2NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtkYXRhLWRvY3VtZW50X2lkXVtuYW1lXSwgdGV4dGFyZWFbZGF0YS1kb2N1bWVudF9pZF1bbmFtZV0nKTtcbiAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09IDAgJiYgXG4gICAgICAgIGZldGNoX2NvbnRhaW5lciAhPSBkb2N1bWVudCAmJlxuICAgICAgICBmZXRjaF9jb250YWluZXIuaGFzQXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJykgJiYgXG4gICAgICAgIGZldGNoX2NvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ25hbWUnKSkgXG4gICAge1xuICAgICAgZWxlbWVudHMgPSBbZmV0Y2hfY29udGFpbmVyXTtcbiAgICB9XG5cbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICBpZiAoIUNvQ3JlYXRlLmlucHV0LmlzVXNhZ2VZKGVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHNlbGYuY2hlY2tFeGlzdEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgICAgLy8gdGhpcy5zZXRJbml0VmFsdWUoZWxlbWVudHNbaV0pXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuXHRcdFx0aWYgKENvQ3JlYXRlLm9ic2VydmVyLmdldEluaXRpYWxpemVkKGVsZW1lbnQsICd0ZXh0JykpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Q29DcmVhdGUub2JzZXJ2ZXIuc2V0SW5pdGlhbGl6ZWQoZWxlbWVudCwgJ3RleHQnKTtcbiAgICAgIFxuICAgICAgc2VsZi5fX2luaXRFdmVudHMoZWxlbWVudCk7XG4gICAgICBcbiAgICAgIGlmIChDb0NyZWF0ZS5mb3JtLmNoZWNrSUQoZWxlbWVudCkpIHtcbiAgICAgICAgc2VsZi5jcmVhdGVZRG9jKGVsZW1lbnQpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLy4gcmVnaXN0ZXIgY3JlYXRlIGRvY3VtZW50X2lkIGV2ZW50XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2V0LWRvY3VtZW50X2lkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBsZXQgZWwgPSB0aGlzO1xuICAgICAgICAgIGxldCB0ZXh0X3N0ciA9IGVsLnZhbHVlO1xuICAgICAgICAgIFxuICAgICAgICAgIHNlbGYuY3JlYXRlWURvYyhlbCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZWwudmFsdWUgPSBcIlwiO1xuICAgICAgICAgIHNlbGYuc2VuZENoYW5nZURhdGEoZWwsIHRleHRfc3RyLCAwLCB0ZXh0X3N0ci5sZW5ndGgpO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG4gIFxuICBjaGVja0V4aXN0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuZWxlbWVudHNbaV0uaXNTYW1lTm9kZShlbGVtZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuICBcbiAgc2V0SW5pdFZhbHVlOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIHR5cGVJZCA9IHRoaXMuZ2VuZXJhdGVUeXBlTmFtZShlbGVtZW50KTtcbiAgICB2YXIgdmFsdWUgPSBDb0NyZWF0ZS5jcmR0LmdldFdob2xlU3RyaW5nKHR5cGVJZCk7XG4gICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgIFxuICAgIC8vIENvQ3JlYXRlLmlucHV0LnNldFZhbHVlKGVsZW1lbnQsIHZhbHVlKTtcbiAgfSxcbiAgXG4gIGNyZWF0ZVlEb2M6IGZ1bmN0aW9uKGVsZW1lbnQsIGlzRXhjbHVkZSkge1xuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jb2xsZWN0aW9uJylcblx0XHRjb25zdCBkb2N1bWVudF9pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJylcblx0XHRjb25zdCBuYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBjb25zdCBzdGF0dXMgPSBDb0NyZWF0ZS5jcmR0LmluaXQoe1xuICAgICAgY29sbGVjdGlvbjogY29sbGVjdGlvbixcbiAgICAgIGRvY3VtZW50X2lkOiBkb2N1bWVudF9pZCxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgIH0pXG4gICAgaWYgKCFpc0V4Y2x1ZGUpIHtcbiAgICAgIHRoaXMuZWxlbWVudHMucHVzaChlbGVtZW50KVxuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnZhbHVlID0gQ29DcmVhdGUuY3JkdC5nZXRUZXh0KHtjb2xsZWN0aW9uLCBkb2N1bWVudF9pZCwgbmFtZSB9KVxuICAgICAgLy8gQ29DcmVhdGUuaW5wdXQuc2V0VmFsdWUoZWxlbWVudCwgQ29DcmVhdGUuY3JkdC5nZXRUZXh0KHtjb2xsZWN0aW9uLCBkb2N1bWVudF9pZCwgbmFtZSB9KSk7XG4gICAgfVxuICB9LFxuICBcbiAgXG4gIF9faW5pdEV2ZW50czogZnVuY3Rpb24oaW5wdXRfZWxlbWVudCkge1xuXG4gICAgLy8uIHNlbGVjdGlvbiBldmVudFxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIFxuICAgIGlucHV0X2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQgIT09IHRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgc2VsZi5zZXRTZWxlY3Rpb25JbmZvKHRoaXMsIHRydWUsIHRoaXMuc2VsZWN0aW9uU3RhcnQsIHRoaXMuc2VsZWN0aW9uRW5kKVxuICAgICAgICBcbiAgICAgICAgaWYoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcylcbiAgICAgICAgICBzZWxmLnNlbmRQb3NpdGlvbih0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpbnB1dF9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgbGV0IGFycm93cyA9IFszNywzOCwzOSw0MF07XG4gICAgICAgIGlmKGFycm93cy5pbmRleE9mKGV2ZW50LmtleUNvZGUpIT0tMSl7XG4gICAgICAgICAgc2VsZi5zZW5kUG9zaXRpb24odGhpcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBpbnB1dF9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBsZXQgYXJyb3dzID0gWzM3LDM4LDM5LDQwXTtcbiAgICAgICAgaWYoYXJyb3dzLmluZGV4T2YoZXZlbnQua2V5Q29kZSkhPS0xKXtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwia2V5ZG93biAtLS0tIFwiKVxuICAgICAgICAgIHNlbGYuc2VuZFBvc2l0aW9uKHRoaXMpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgaW5wdXRfZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMpXG4gICAgICAgICAgc2VsZi5zZW5kUG9zaXRpb24odGhpcyk7XG4gICAgfSk7XG4gICAgXG4gICAgaW5wdXRfZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaWQgPSBzZWxmLmdlbmVyYXRlVHlwZU5hbWUodGhpcyk7XG4gICAgICAgIENvQ3JlYXRlLmNyZHQuc2V0Q3Vyc29yTnVsbChpZCk7XG4gICAgfSk7XG4gICAgXG4gICAgaW5wdXRfZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBsZXQgbm93c3RhcnQgPSB0aGlzLnNlbGVjdGlvblN0YXJ0IC0gMTtcbiAgICAgIGxldCBub3dlbmQgPSBub3dzdGFydDtcbiAgICAgIGxldCBzZWxlY3Rpb25faW5mbyA9IHNlbGYuZ2V0U2VsZWN0aW9uSW5mbyh0aGlzKTtcbiAgICAgIGxldCBjb250ZW50X3RleHQgPSBcIlwiO1xuICAgICAgbGV0IGlzVXBkYXRlID0gZmFsc2U7ICAgICAgXG4gICAgICBzd2l0Y2ggKGV2ZW50LmlucHV0VHlwZSkge1xuICAgICAgICBjYXNlICdkZWxldGVDb250ZW50QmFja3dhcmQnOlxuICAgICAgICAgIGlzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICBub3dzdGFydCArKztcbiAgICAgICAgICBub3dlbmQgPSBub3dzdGFydCArIDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RlbGV0ZUNvbnRlbnRGb3J3YXJkJzpcbiAgICAgICAgICBpc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgbm93c3RhcnQgKys7XG4gICAgICAgICAgbm93ZW5kID0gbm93c3RhcnQgKyAxO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdpbnNlcnRMaW5lQnJlYWsnOlxuICAgICAgICAgIGlzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICBjb250ZW50X3RleHQgPSBcIlxcblwiO1xuICAgICAgICAgIG5vd2VuZCArKztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaW5zZXJ0VGV4dCc6XG4gICAgICAgICAgaXNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgIGNvbnRlbnRfdGV4dCA9IGV2ZW50LmRhdGEgfHwgXCJcXG5cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZGVsZXRlQnlDdXQnOlxuICAgICAgICAgIGlzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoaXNVcGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGVjdGlvbl9pbmZvLmlzX3NlbGVjdGVkKSB7XG4gICAgICAgICAgLy8uIGRlbGV0ZSBldmVudFxuICAgICAgICAgIGxldCBjaGFyYWN0ZXJfZGVsZXRlZCA9IHNlbGVjdGlvbl9pbmZvLnN0YXJ0IC0gc2VsZWN0aW9uX2luZm8uZW5kO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vQ29DcmVhdGUuY3Vyc29ycy5yZWNhbGN1bGF0ZV9sb2NhbF9jdXJzb3JzKHRoaXMsY2hhcmFjdGVyX2RlbGV0ZWQpXG4gICAgICAgICAgXG4gICAgICAgICAgc2VsZi5zZW5kQ2hhbmdlRGF0YSh0aGlzLCBcIlwiLCBzZWxlY3Rpb25faW5mby5zdGFydCwgc2VsZWN0aW9uX2luZm8uZW5kKTtcbiAgICAgICAgICBpZiAoY29udGVudF90ZXh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlbGYuc2VuZENoYW5nZURhdGEodGhpcywgY29udGVudF90ZXh0LCBub3dzdGFydCwgbm93ZW5kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5zZXRTZWxlY3Rpb25JbmZvKHRoaXMsIGZhbHNlLCB0aGlzLnNlbGVjdGlvblN0YXJ0LCB0aGlzLnNlbGVjdGlvblN0YXJ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLnNlbmRDaGFuZ2VEYXRhKHRoaXMsIGNvbnRlbnRfdGV4dCwgbm93c3RhcnQsIG5vd2VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLyoqIHVuc2VsZWN0IGV2ZW50cyAqKi8gICAgXG4gICAgaW5wdXRfZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oZSkge1xuICAgICAgc2VsZi5zZXRTZWxlY3Rpb25JbmZvKHRoaXMsIGZhbHNlLCB0aGlzLnNlbGVjdGlvblN0YXJ0LCB0aGlzLnNlbGVjdGlvblN0YXJ0KTtcbiAgICB9KVxuICAgIGlucHV0X2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICBzZWxmLnNldFNlbGVjdGlvbkluZm8odGhpcywgZmFsc2UsIHRoaXMuc2VsZWN0aW9uU3RhcnQsIHRoaXMuc2VsZWN0aW9uU3RhcnQpO1xuICAgIH0pXG4gICAgXG4gICAgLyoqIHBhc3QgZXZlbnRzICoqL1xuICAgIGlucHV0X2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgbGV0IGNvbnRlbnRfdGV4dCA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpO1xuICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25TdGFydDtcbiAgICAgIGxldCBlbmQgPSB0aGlzLnNlbGVjdGlvbkVuZDtcbiAgICAgIC8vLiBzZW5kIGRlbGV0ZSBldmVudFxuICAgICAgaWYgKHN0YXJ0ICE9IGVuZCkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvblJhbmdlKGVuZCwgZW5kKVxuICAgICAgICBzZWxmLnNlbmRDaGFuZ2VEYXRhKHRoaXMsIFwiXCIsIHN0YXJ0LCBlbmQsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmKHN0YXJ0PT1lbmQpe1xuICAgICAgICAvLyB0byBjYWxjdWxhdGUgQ3Vyc29ycyBpbiBjb2xsYWJvcmF0aW9uIFxuICAgICAgICAvLyBDb0NyZWF0ZS5jdXJzb3JzLnJlY2FsY3VsYXRlX2xvY2FsX2N1cnNvcnModGhpcyxjb250ZW50X3RleHQubGVuZ3RoKVxuICAgICAgfVxuICAgICAgLy8uIGluc2VydCBldmVudFxuICAgICAgc2VsZi5zZW5kQ2hhbmdlRGF0YSh0aGlzLCBjb250ZW50X3RleHQsIHN0YXJ0LCBzdGFydCwgZmFsc2UpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG4gICAgXG4gICAgaW5wdXRfZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjb2NyZWF0ZS15LXVwZGF0ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgaW5mbyA9IGV2ZW50LmRldGFpbDtcbiAgICAgIGlucHV0X2VsZW1lbnQuY3J1ZFNldHRlZCA9IHRydWU7XG4gICAgICBcbiAgICAgIHZhciBwb3MgPSAwO1xuICAgICAgdmFyIGZsYWcgPSB0cnVlO1xuXG4gICAgICBpbmZvLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLnJldGFpbikge1xuICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgIHBvcyA9IGl0ZW0ucmV0YWluO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaXRlbS5pbnNlcnQgfHwgaXRlbS5kZWxldGUpIHtcbiAgICAgICAgICBpZiAoZmxhZyA9PSBmYWxzZSkgcG9zID0gMDtcbiAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGl0ZW0uaW5zZXJ0KSB7XG4gICAgICAgICAgICAvLy4gaW5zZXJ0IHByb2Nlc3NcbiAgICAgICAgICAgIHNlbGYudXBkYXRlQ2hhbmdlRGF0YSh0aGlzLCBpdGVtLmluc2VydCwgcG9zLCBwb3MpXG4gICAgICAgICAgfSBlbHNlIGlmIChpdGVtLmRlbGV0ZSkge1xuICAgICAgICAgICAgLy8uIGRlbGV0ZSBwcm9jZXNzXG4gICAgICAgICAgICBzZWxmLnVwZGF0ZUNoYW5nZURhdGEodGhpcywgXCJcIiwgcG9zLCBwb3MgKyBpdGVtLmRlbGV0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH0sXG5cbiAgc2V0U2VsZWN0aW9uSW5mbzpmdW5jdGlvbihlLCBpc1NlbGVjdCwgc3RhcnQsIGVuZCkge1xuICAgIGUuc2V0QXR0cmlidXRlKFwiaXNfc2VsZWN0ZWRcIiwgaXNTZWxlY3QpO1xuICAgIGUuc2V0QXR0cmlidXRlKFwic2VsZWN0aW9uX3N0YXJ0XCIsIHN0YXJ0KTtcbiAgICBlLnNldEF0dHJpYnV0ZShcInNlbGVjdGlvbl9lbmRcIiwgZW5kKTtcbiAgICAvL2NvbnNvbGUubG9nKFwic3dlbGVjdFwiLGUpXG4gICAgdGhpcy5zZW5kUG9zaXRpb24oZSk7XG4gIH0sXG4gIFxuICBnZXRTZWxlY3Rpb25JbmZvOiBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzX3NlbGVjdGVkOiAoZS5nZXRBdHRyaWJ1dGUoXCJpc19zZWxlY3RlZFwiKSA9PT0gJ3RydWUnKSA/IHRydWUgOiBmYWxzZSxcbiAgICAgIHN0YXJ0OiBwYXJzZUludChlLmdldEF0dHJpYnV0ZShcInNlbGVjdGlvbl9zdGFydFwiKSksXG4gICAgICBlbmQ6cGFyc2VJbnQoZS5nZXRBdHRyaWJ1dGUoXCJzZWxlY3Rpb25fZW5kXCIpKVxuICAgIH1cbiAgfSxcbiAgXG4gIGNoZWNrRG9jdW1lbnRJRDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIGxldCBkb2N1bWVudF9pZCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJyk7XG4gICAgaWYgKCFkb2N1bWVudF9pZCB8fCBkb2N1bWVudF9pZCA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgXG4gIHNlbmRDaGFuZ2VEYXRhOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50LCBzdGFydCwgZW5kLCBpc1JlbW92ZSA9IHRydWUpIHtcblxuICAgIGlmICghdGhpcy5jaGVja0RvY3VtZW50SUQoZWxlbWVudCkpIHtcbiAgICAgIENvQ3JlYXRlLmZvcm0ucmVxdWVzdCh7ZWxlbWVudDogZWxlbWVudCwgbmFtZUF0dHI6IFwibmFtZVwifSlcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJywgJ3BlbmRpbmcnKTtcbiAgICAgIHJldHVybiA7XG4gICAgfVxuICAgIFxuICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpID09ICdwZW5kaW5nJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29sbGVjdGlvbicpLFxuICAgICAgICAgIGRvY3VtZW50X2lkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZG9jdW1lbnRfaWQnKSxcbiAgICAgICAgICBuYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBcbiAgICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2F2ZV92YWx1ZScpID09ICdmYWxzZScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyhcIlNlbmRDaGFuZ2VEYXRhRnJvbSBDb2NyZWF0ZS1UZXh0XCIpXG4gICAgbGV0IGNoYXJhY3Rlcl9jb3VudCA9IGNvbnRlbnQubGVuZ3RoID4gMCA/IGNvbnRlbnQubGVuZ3RoIDogLTE7XG4gICAgQ29DcmVhdGUuY3Vyc29ycy5yZWNhbGN1bGF0ZV9sb2NhbF9jdXJzb3JzKGVsZW1lbnQsY2hhcmFjdGVyX2NvdW50KTtcbiAgICBcbiAgICAgIC8vc2VuZCBwb3NpdGlvbiB3aGVuIGtleVVwIFxuICAgIHRoaXMuc2VuZFBvc2l0aW9uKGVsZW1lbnQpXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGlzUmVtb3ZlKSAge1xuICAgICAgICBlbGVtZW50LnNldFJhbmdlVGV4dChcIlwiLCBzdGFydCwgc3RhcnQgKyBjb250ZW50Lmxlbmd0aCwgXCJzdGFydFwiKVxuICAgICAgfVxuICAgICAgQ29DcmVhdGUuY3JkdC5pbnNlcnRUZXh0KHtcbiAgICAgICAgY29sbGVjdGlvbiwgZG9jdW1lbnRfaWQsIG5hbWUsXG4gICAgICAgIHZhbHVlOiBjb250ZW50LFxuICAgICAgICBwb3NpdGlvbjogc3RhcnRcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc1JlbW92ZSkgZWxlbWVudC5zZXRSYW5nZVRleHQoXCIgXCIucmVwZWF0KGVuZCAtIHN0YXJ0KSwgc3RhcnQsIHN0YXJ0LCBcImVuZFwiKVxuICAgICAgQ29DcmVhdGUuY3JkdC5kZWxldGVUZXh0KHtcbiAgICAgICAgY29sbGVjdGlvbiwgZG9jdW1lbnRfaWQsIG5hbWUsXG4gICAgICAgIHBvc2l0aW9uOiBzdGFydCxcbiAgICAgICAgbGVuZ3RoOiBlbmQgLSBzdGFydCxcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsZW1lbnQpe1xuICAgICAgdGhpcy5zZXRTZWxlY3Rpb25JbmZvKGVsZW1lbnQsIGZhbHNlLCBlbGVtZW50LnNlbGVjdGlvblN0YXJ0LCBlbGVtZW50LnNlbGVjdGlvblN0YXJ0KTtcbiAgICAgIHRoaXMuc2VuZFBvc2l0aW9uKGVsZW1lbnQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGVDaGFuZ2VEYXRhOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50LCBzdGFydCwgZW5kKSB7XG5cbiAgICBsZXQgcHJldl9zdGFydCA9IGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgbGV0IHByZXZfZW5kID0gZWxlbWVudC5zZWxlY3Rpb25FbmQ7XG4gICAgZWxlbWVudC5zZXRSYW5nZVRleHQoY29udGVudCwgc3RhcnQsIGVuZCwgXCJlbmRcIik7XG5cbiAgICBpZiAocHJldl9zdGFydCA+PSBzdGFydCkge1xuICAgICAgaWYgKGNvbnRlbnQgPT0gXCJcIikge1xuICAgICAgICBwcmV2X3N0YXJ0IC09IGVuZCAtIHN0YXJ0O1xuICAgICAgICBwcmV2X2VuZCAtPSBlbmQgLSBzdGFydDtcbiAgICAgICAgcHJldl9zdGFydCA9IHByZXZfc3RhcnQgPCBzdGFydCA/IHN0YXJ0IDogcHJldl9zdGFydDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByZXZfc3RhcnQgKz0gY29udGVudC5sZW5ndGg7XG4gICAgICAgIHByZXZfZW5kICs9IGNvbnRlbnQubGVuZ3RoO1xuICAgICAgfVxuICAgIH0ge1xuICAgICAgaWYgKGNvbnRlbnQgPT0gXCJcIiAmJiBwcmV2X2VuZCA+PSBzdGFydCkge1xuICAgICAgICBwcmV2X2VuZCA9IChwcmV2X2VuZCA+PSBlbmQpID8gcHJldl9lbmQgLSAoZW5kIC0gc3RhcnQpIDogc3RhcnRcbiAgICAgIH0gXG4gICAgfVxuICAgIFxuICAgIGVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBwcmV2X3N0YXJ0O1xuICAgIGVsZW1lbnQuc2VsZWN0aW9uRW5kID0gcHJldl9lbmQ7XG5cbiAgICB2YXIgaXNGb2N1c2VkID0gKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsZW1lbnQpO1xuICAgIENvQ3JlYXRlLmN1cnNvcnMucmVmcmVzaF9taXJyb3IoZWxlbWVudCk7XG4gICAgXG4gICAgaWYgKENvQ3JlYXRlLmZsb2F0aW5nTGFiZWwpICAge1xuICAgICAgQ29DcmVhdGUuZmxvYXRpbmdMYWJlbC51cGRhdGUoZWxlbWVudCwgZWxlbWVudC52YWx1ZSlcbiAgICB9XG5cbiAgfSxcbiAgXG4gIGdlbmVyYXRlVHlwZU5hbWU6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgY29sbGVjdGlvbiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKTtcbiAgICB2YXIgZG9jdW1lbnRfaWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1kb2N1bWVudF9pZCcpO1xuICAgIHZhciBuYW1lID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ25hbWUnKTtcbiAgICBcbiAgICByZXR1cm4gQ29DcmVhdGUuY3JkdC5nZW5lcmF0ZUlEKGNvbmZpZy5vcmdhbml6YXRpb25fSWQsIGNvbGxlY3Rpb24sIGRvY3VtZW50X2lkLCBuYW1lKTtcbiAgfSxcbiAgXG4gIHNldFRleHQ6IGZ1bmN0aW9uKGVsZW1lbnRfaWQsIGluZm8pIHtcbiAgICB2YXIgcG9zID0gMDtcbiAgICB2YXIgZmxhZyA9IHRydWU7XG4gICAgXG4gICAgaW5mby5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYgKGl0ZW0ucmV0YWluKSB7XG4gICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICBwb3MgPSBpdGVtLnJldGFpbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGl0ZW0uaW5zZXJ0IHx8IGl0ZW0uZGVsZXRlKSB7XG4gICAgICAgIGlmIChmbGFnID09IGZhbHNlKSBwb3MgPSAwO1xuICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoaXRlbS5pbnNlcnQpIHtcbiAgICAgICAgICAvLy4gaW5zZXJ0IHByb2Nlc3NcbiAgICAgICAgICB0aGlzLnJlY2VpdmVDaGFuZ2VEYXRhKGVsZW1lbnRfaWQsIGl0ZW0uaW5zZXJ0LCBwb3MsIHBvcylcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtLmRlbGV0ZSkge1xuICAgICAgICAgIC8vLiBkZWxldGUgcHJvY2Vzc1xuICAgICAgICAgIHRoaXMucmVjZWl2ZUNoYW5nZURhdGEoZWxlbWVudF9pZCwgXCJcIiwgcG9zLCBwb3MgKyBpdGVtLmRlbGV0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9XG4gICAgfSlcbiAgfSxcbiAgXG4gIGlzQXZhaWFibGVFbDogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vY29uc29sZS5sb2codGhpcy5lbGVtZW50cylcbiAgICBcbiAgICBmb3IgKHZhciAgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmVsZW1lbnRzW2ldLmlzRXF1YWxOb2RlKGVsZW1lbnQpLGVsZW1lbnQpXG4gICAgICBpZiAodGhpcy5lbGVtZW50c1tpXS5pc0VxdWFsTm9kZShlbGVtZW50KT09PXRydWUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcbiAgXG4gIHNlbmRQb3NpdGlvbjogZnVuY3Rpb24oZWxlbWVudCkge1xuICAgIC8vY29uc29sZS5sb2coXCJTZSBlbnZpbyBcIilcbiAgICAvKmlmICghdGhpcy5pc0F2YWlhYmxlRWwoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9Ki9cbiAgICBcbiAgICBjb25zdCBpZCA9IHRoaXMuZ2VuZXJhdGVUeXBlTmFtZShlbGVtZW50KTtcbiAgICAvL2NvbnNvbGUubG9nKFwiIFNFbmQgUG9zaXRpb24gU2VsZWN0b3IgSUQgXCIsaWQpXG4gICAgLy9jb25zb2xlLmxvZyhlbGVtZW50LnNlbGVjdGlvblN0YXJ0LCBlbGVtZW50LnNlbGVjdGlvbkVuZCk7XG4gICAgbGV0IGZyb20gPSBlbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgIGxldCB0byA9IGVsZW1lbnQuc2VsZWN0aW9uRW5kO1xuICAgIC8vY29uc29sZS5sb2coXCJTZSBlbnZpbyBsYSBwb3NpdGlvbiBcIixpZCxmcm9tLCB0bylcbiAgICBDb0NyZWF0ZS5jcmR0LnNldFBvc2l0aW9uWUpTKGlkLCBmcm9tLCB0byk7XG4gICAgXG4gIH1cbn1cblxuXG5Db0NyZWF0ZVRleHQuaW5pdCgpO1xuLy8gQ29DcmVhdGVJbml0LnJlZ2lzdGVyKCdDb0NyZWF0ZVRleHQnLCBDb0NyZWF0ZVRleHQsIENvQ3JlYXRlVGV4dC5pbml0RWxlbWVudCk7XG5cbkNvQ3JlYXRlLm9ic2VydmVyLmluaXQoeyBcblx0bmFtZTogJ0NvQ3JlYXRlVGV4dENyZWF0ZScsIFxuXHRvYnNlcnZlOiBbJ3N1YnRyZWUnLCAnY2hpbGRMaXN0J10sXG5cdGluY2x1ZGU6ICdbZGF0YS1jb2xsZWN0aW9uXVtkYXRhLWRvY3VtZW50X2lkXVtuYW1lXScsIFxuXHRjYWxsYmFjazogZnVuY3Rpb24obXV0YXRpb24pIHtcblx0ICBjb25zb2xlLmxvZygnY29jcmVhdGUtdGV4dCBpbml0Jylcblx0XHRDb0NyZWF0ZVRleHQuaW5pdEVsZW1lbnQobXV0YXRpb24udGFyZ2V0KVxuXHR9XG59KTtcblxuQ29DcmVhdGUub2JzZXJ2ZXIuaW5pdCh7IFxuXHRuYW1lOiAnQ29DcmVhdGVUZXh0TmFtZU9ic2VydmVyJywgXG5cdG9ic2VydmU6IFsnYXR0cmlidXRlcyddLFxuXHRhdHRyaWJ1dGVzOiBbJ25hbWUnXSxcblx0Y2FsbGJhY2s6IGZ1bmN0aW9uKG11dGF0aW9uKSB7XG5cdFx0Y29uc29sZS5sb2coJ2NoYW5nZSBjb2NyZWF0ZS10ZXh0IG5hbWUnKVxuXHRcdENvQ3JlYXRlVGV4dC5yZWZyZXNoRWxlbWVudChtdXRhdGlvbilcblx0fVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENvQ3JlYXRlVGV4dDsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../CoCreate-components/CoCreate-text/src/index.js\n");

/***/ })

/******/ })["default"];
});